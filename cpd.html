<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.3 at May 29, 2013 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Rebar - CPD Results</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20130529" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                Rebar
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
            
                <div class="xleft">
        <span id="publishDate">Last Published: 2013-05-29</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0.2</span>
                      </div>
            <div class="xright">                    <a href="./" title="Rebar">Rebar</a>
              
            
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
            
                                          <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                                            <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                                                              <li class="expanded">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                    <ul>
                      <li class="none">
                          <a href="cobertura/index.html" title="Cobertura Test Coverage">Cobertura Test Coverage</a>
            </li>
                      <li class="none">
                          <a href="surefire-report.html" title="Surefire Report">Surefire Report</a>
            </li>
                      <li class="none">
                          <a href="testapidocs/index.html" title="Test JavaDocs">Test JavaDocs</a>
            </li>
                      <li class="none">
                          <a href="apidocs/index.html" title="JavaDocs">JavaDocs</a>
            </li>
                      <li class="none">
                          <a href="xref/index.html" title="Source Xref">Source Xref</a>
            </li>
                      <li class="none">
                          <a href="xref-test/index.html" title="Test Source Xref">Test Source Xref</a>
            </li>
                      <li class="none">
                          <a href="findbugs.html" title="FindBugs Report">FindBugs Report</a>
            </li>
                      <li class="none">
                          <a href="pmd.html" title="PMD Report">PMD Report</a>
            </li>
                      <li class="none">
            <strong>CPD Report</strong>
          </li>
              </ul>
        </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
            
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>CPD Results<a name="CPD_Results"></a></h2><p>The following document contains the results of PMD's  <a class="externalLink" href="http://pmd.sourceforge.net/cpd.html">CPD</a> 4.2.5.</p></div><div class="section"><h2>Duplications<a name="Duplications"></a></h2><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>edu/jhu/rebar/accumulo/AccumuloProtoReader.java</td><td><a href="./xref/edu/jhu/rebar/accumulo/AccumuloProtoReader.html#442">442</a></td></tr><tr class="a"><td>edu/jhu/rebar/file/FileBackedCorpus.java</td><td><a href="./xref/edu/jhu/rebar/file/FileBackedCorpus.html#319">319</a></td></tr><tr class="b"><td colspan='2'><div><pre>                    }
                } catch (InvalidProtocolBufferException e) {
                    throw new RebarException(e);
                }
                // If we're done with everything, then return immediately.
                if (stageValues.isEmpty())
                    return builder.build();
                // If the stage we just merged in is depended on by other
                // stages, then we need to rebuild the message before we
                // traverse it... Currently we don't keep that info, so
                // for now, just always do it.
                if (true) {
                    msg = builder.build();
                    builder = null;
                }
            }

            // Recurse to subfields
            for (Map.Entry&lt;FieldDescriptor, Object&gt; field : msg.getAllFields()
                    .entrySet()) {
                FieldDescriptor fd = field.getKey();
                if (fd.getJavaType() == FieldDescriptor.JavaType.MESSAGE) {
                    if (fd.isRepeated()) {
                        @SuppressWarnings(&quot;unchecked&quot;)
                        List&lt;Message&gt; children = (List&lt;Message&gt;) field
                                .getValue();
                        for (int i = 0; i &lt; children.size(); i++) {
                            Message child = children.get(i);</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>edu/jhu/rebar/accumulo/AccumuloProtoReader.java</td><td><a href="./xref/edu/jhu/rebar/accumulo/AccumuloProtoReader.html#411">411</a></td></tr><tr class="a"><td>edu/jhu/rebar/file/FileBackedCorpus.java</td><td><a href="./xref/edu/jhu/rebar/file/FileBackedCorpus.html#293">293</a></td></tr><tr class="b"><td colspan='2'><div><pre>                Map&lt;ProtoIndex.ModificationTarget, List&lt;StageOutput&gt;&gt; stageValues)
                throws RebarException {
            Message.Builder builder = null;

            // Get the modification target for this message.
            final ProtoIndex.ModificationTarget target;
            Concrete.UUID uuid = IdUtil.getUUIDOrNull(msg); // uuid may be null.
            if (uuid != null)
                target = new ProtoIndex.ModificationTarget(uuid);
            else if (msg instanceof Concrete.Edge) {
                target = new ProtoIndex.ModificationTarget(
                        ((Concrete.Edge) msg).getEdgeId());
            } else
                target = null;
            // System.err.println(&quot;Merging, target=&quot;+target);
            // Get any values we should merge into this target, and merge them.
            List&lt;StageOutput&gt; valuesToMerge = stageValues.remove(target);
            if (valuesToMerge != null) {
                try {
                    // Merge in the new values.
                    for (StageOutput stageOutput : valuesToMerge) {
                        if (builder == null)
                            builder = msg.toBuilder();</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>edu/jhu/rebar/IndexedKnowledgeGraph.java</td><td><a href="./xref/edu/jhu/rebar/IndexedKnowledgeGraph.html#85">85</a></td></tr><tr class="a"><td>edu/jhu/rebar/accumulo/AccumuloBackedCorpus.java</td><td><a href="./xref/edu/jhu/rebar/accumulo/AccumuloBackedCorpus.html#187">187</a></td></tr><tr class="b"><td colspan='2'><div><pre>	    Concrete.UUID v1 = edge.getEdgeId().getV1();
	    Concrete.UUID v2 = edge.getEdgeId().getV2();
	    if (!neighbors.containsKey(v1))
		neighbors.put(v1, new HashSet&lt;Concrete.UUID&gt;());
	    if (!neighbors.containsKey(v2))
		neighbors.put(v2, new HashSet&lt;Concrete.UUID&gt;());
	    neighbors.get(v1).add(v2);
	    neighbors.get(v2).add(v1);
	}</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>edu/jhu/rebar/rpc/UnnamedPipeRPC.java</td><td><a href="./xref/edu/jhu/rebar/rpc/UnnamedPipeRPC.html#535">535</a></td></tr><tr class="a"><td>edu/jhu/rebar/rpc/UnnamedPipeRPC.java</td><td><a href="./xref/edu/jhu/rebar/rpc/UnnamedPipeRPC.html#748">748</a></td></tr><tr class="b"><td colspan='2'><div><pre>        Graph self = graphs.get(request.getSelf().getId());
        Set&lt;Stage&gt; dependencies = new TreeSet&lt;Stage&gt;();
        for (int dep : request.getDependencyList())
            dependencies.add(self.getStage(dep));
        Stage newStage = self.makeStage(request.getStageName(), request.getStageVersion(), dependencies, request.getDescription(),
                request.getDeleteIfExists());
        return RPCResponse.newBuilder().addStage(buildRpcStage(newStage)).build();
    }

    private RPCResponse handleGraphDeleteStage(ConcreteRpc.Graph.DeleteStage request) throws RebarException {</pre></div></td></tr></table></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2013.
          All Rights Reserved.      
            
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
